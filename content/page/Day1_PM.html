---
title: "Day 1 - PM"
output: 
  blogdown::html_page: 
    toc: true   
    toc_depth: 1
    highlight: tango
    css: css/camp_style.css
    number_sections: true
    self_contained: false
    fontsize: 18pt
    monofont: Source Code Pro
---

<script src="/rmarkdown-libs/clipboard/clipboard.min.js"></script>
<link href="/rmarkdown-libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
<script src="/rmarkdown-libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
<script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
<link href="/rmarkdown-libs/font-awesome/css/all.css" rel="stylesheet" />
<link href="/rmarkdown-libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>
  <link rel="stylesheet" href="css/camp_style.css" type="text/css" />

<div id="TOC">
<ul>
<li><a href="#dplyr" id="toc-dplyr"><span class="toc-section-number">1</span> dplyr</a></li>
<li><a href="#glimpse-summary" id="toc-glimpse-summary"><span class="toc-section-number">2</span> <code>glimpse()</code> &amp; <code>summary()</code></a></li>
<li><a href="#your-analysis-toolbox" id="toc-your-analysis-toolbox"><i class="fa fa-toolbox"></i> Your analysis toolbox</a></li>
<li><a href="#porg-tables" id="toc-porg-tables"><span class="toc-section-number">3</span> Porg tables</a></li>
<li><a href="#select" id="toc-select"><span class="toc-section-number">4</span> <code>select()</code></a></li>
<li><a href="#sort-with-arrange" id="toc-sort-with-arrange"><span class="toc-section-number">5</span> Sort with <code>arrange()</code></a></li>
<li><a href="#r-bingo" id="toc-r-bingo">R BINGO!</a></li>
<li><a href="#filter" id="toc-filter"><span class="toc-section-number">6</span> <code>filter()</code></a></li>
<li><a href="#mutate" id="toc-mutate"><span class="toc-section-number">7</span> <code>mutate()</code></a></li>
<li><a href="#saving-data" id="toc-saving-data"><span class="toc-section-number">8</span> Saving data</a></li>
<li><a href="#plots-with-ggplot2" id="toc-plots-with-ggplot2"><span class="toc-section-number">9</span> Plots with <em>ggplot2</em></a></li>
<li><a href="#shutdown-complete" id="toc-shutdown-complete"><span class="toc-section-number">10</span> Shutdown complete</a></li>
<li><a href="#learn-more" id="toc-learn-more"><span class="toc-section-number">11</span> Learn more!</a></li>
</ul>
</div>

<div id="data-exploration" class="section level2 unnumbered">
<h2>Data exploration</h2>
</div>
<div id="dplyr" class="section level1" number="1">
<h1><span class="header-section-number">1</span> dplyr</h1>
<hr>
<p><img src="../images/dplyr_hex.png" style="margin-right: 32px; margin-top: 8px; margin-bottom: 20px;" align="left" width="128" /></p>
<p><br></p>
<p><strong>You’ve unlocked a new package!</strong></p>
<p><br></p>
<div style="clear: both; margin-top: 22px;">

</div>
<p><b> <em>dplyr</em> </b> is the go-to tool for exploring, re-arranging, and summarizing data.</p>
<p>We could install it the usual way, but there is GOOD NEWS! All of our favorite packages are bundled together into a super package called <strong><code>tidyverse</code></strong>. Installing and loading the <em>tidyverse</em> package will load the previous <code>readr</code> and <code>ggplot2</code> packages we introduced earlier, as well as <code>dplyr</code> and other great packages.</p>
<p>Here is the complete list of packages in the <code>tidyverse</code></p>
<blockquote>
<ul>
<li><strong><code>readr</code></strong></li>
<li><strong><code>ggplot2</code></strong></li>
<li><strong><code>dplyr</code></strong></li>
<li><code>tidyr</code></li>
<li><code>lubridate</code></li>
<li><code>stringr</code></li>
<li><code>forcats</code></li>
<li><code>purrr</code></li>
<li><code>tibble</code></li>
</ul>
</blockquote>
<p><br></p>
<p>Use <code>install.packages("tidverse")</code> to add the <em>tidyverse</em> to your library.</p>
<div style="clear: both; margin-top: 22px;">

</div>
<p>Then try loading the package from your library to test if it was installed.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p><br></p>
<blockquote>
<p>We can now use <strong>ALL</strong> the functions included in any of the <em>tidyverse</em> packages, including <code>dplyr</code>.</p>
</blockquote>
<div id="get-to-know-your-data-frame" class="section level2 unnumbered">
<h2>Get to know your data frame</h2>
<p>Use these functions to describe your data.</p>
<div id="data-frame-info" class="section level3 unnumbered">
<h3>Data frame info</h3>
<div class="pinkcode">
<table>
<colgroup>
<col width="13%" />
<col width="2%" />
<col width="83%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th></th>
<th align="left">Information</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>names(scrap)</code></td>
<td></td>
<td align="left">column names</td>
</tr>
<tr class="even">
<td align="left"><code>nrow(...)</code></td>
<td></td>
<td align="left">number of rows</td>
</tr>
<tr class="odd">
<td align="left"><code>ncol(...)</code></td>
<td></td>
<td align="left">number of columns</td>
</tr>
<tr class="even">
<td align="left"><code>summary(...)</code></td>
<td></td>
<td align="left">summary of all column values (ex. <em>max</em>, <em>mean</em>, <em>median</em>)</td>
</tr>
<tr class="odd">
<td align="left"><code>glimpse(...)</code></td>
<td></td>
<td align="left">column names + a glimpse of first values (requires <em>dplyr</em> package)</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="glimpse-summary" class="section level1" number="2">
<h1><span class="header-section-number">2</span> <code>glimpse()</code> &amp; <code>summary()</code></h1>
<hr>
<div id="lets-read-the-scrap-data-into-r-and-take-a-look." class="section level3 unnumbered">
<h3>Let’s read the scrap data into R and take a look.</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://mn-r.netlify.com/data/starwars_scrap_jakku.csv&quot;</span>)</span></code></pre></div>
<p><br></p>
<p><code>glimpse()</code> shows you the type of data you have and gives you a sample of values from each column.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View your whole dataframe and the types of data it contains</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(scrap)</span></code></pre></div>
<pre><code>## Rows: 1,132
## Columns: 7
## $ receipt_date    &lt;chr&gt; &quot;4/1/2013&quot;, &quot;4/2/2013&quot;, &quot;4/3/2013&quot;, &quot;4/4/2013&quot;, &quot;4/5/2…
## $ item            &lt;chr&gt; &quot;Flight recorder&quot;, &quot;Proximity sensor&quot;, &quot;Vitus-Series A…
## $ origin          &lt;chr&gt; &quot;Outskirts&quot;, &quot;Outskirts&quot;, &quot;Reestki&quot;, &quot;Tuanul&quot;, &quot;Tuanul…
## $ destination     &lt;chr&gt; &quot;Niima Outpost&quot;, &quot;Raiders&quot;, &quot;Raiders&quot;, &quot;Raiders&quot;, &quot;Nii…
## $ amount          &lt;dbl&gt; 887, 7081, 4901, 707, 107, 32109, 862, 13944, 7788, 10…
## $ units           &lt;chr&gt; &quot;Tons&quot;, &quot;Tons&quot;, &quot;Tons&quot;, &quot;Tons&quot;, &quot;Tons&quot;, &quot;Tons&quot;, &quot;Tons&quot;…
## $ price_per_pound &lt;dbl&gt; 590.93, 1229.03, 225.54, 145.27, 188.28, 1229.03, 1485…</code></pre>
<p><br></p>
<p><code>summary()</code> gives you a quick report of your numeric data.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summary gives us the means, mins, and maxima </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(scrap)</span></code></pre></div>
<pre><code>##  receipt_date           item              origin          destination       
##  Length:1132        Length:1132        Length:1132        Length:1132       
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
##                                                                             
##      amount           units           price_per_pound   
##  Min.   :     65   Length:1132        Min.   :   145.3  
##  1st Qu.:   1544   Class :character   1st Qu.:   259.6  
##  Median :   4099   Mode  :character   Median :   790.7  
##  Mean   :  18751                      Mean   :  3811.7  
##  3rd Qu.:   7475                      3rd Qu.:  1496.7  
##  Max.   :2971601                      Max.   :579215.3  
##  NA&#39;s   :910                          NA&#39;s   :910</code></pre>
<p><br></p>
</div>
<div id="explore" class="section level3 unnumbered tip">
<h3><i class="fas fa-user-astronaut" aria-hidden="true" style="color: green"></i> Explore!</h3>
<p>Try some more of the dataframe description functions.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>( )</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>( )</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>( )</span></code></pre></div>
</div>
</div>
<div id="your-analysis-toolbox" class="section level1 unnumbered">
<h1><i class="fa fa-toolbox"></i> Your analysis toolbox</h1>
<hr class="hr2">
<p><code>dplyr</code> is the hero for most analysis tasks. With these six functions you can accomplish just about anything you want with your data.</p>
<div class="pinkcode">
<p><br></p>
<table>
<colgroup>
<col width="22%" />
<col width="77%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Function</th>
<th align="left">Job</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>select()</code></td>
<td align="left">Select individual columns to drop or keep</td>
</tr>
<tr class="even">
<td align="left"><code>arrange()</code></td>
<td align="left">Sort a table top-to-bottom based on the values of a column</td>
</tr>
<tr class="odd">
<td align="left"><code>filter()</code></td>
<td align="left">Keep only a subset of rows depending on the values of a column</td>
</tr>
<tr class="even">
<td align="left"><code>mutate()</code></td>
<td align="left">Add new columns or update existing columns</td>
</tr>
<tr class="odd">
<td align="left"><code>summarize()</code></td>
<td align="left">Calculate a single summary for an entire table</td>
</tr>
<tr class="even">
<td align="left"><code>group_by()</code></td>
<td align="left">Sort data into groups based on the values of a column</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
</div>
<div id="porg-tables" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Porg tables</h1>
<hr>
<p>A poggle of porgs volunteered to help us demo the <code>dplyr</code> functions.</p>
<p>You can follow along by reading the <strong>porgs</strong> data from the URL below. <em>(Sorry, the data doesn’t include the images.)</em></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>porgs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://mn-r.netlify.com/data/porg_data.csv&quot;</span>)</span></code></pre></div>
<ul class="nav nav-pills" id="myTab" role="tablist" style="margin-top: 18px;">
<li class="nav-item active">
<a class="nav-link" id="porgs-tab" data-toggle="tab" href="#porgs" role="tab" aria-controls="porgs" aria-selected="true"> porgs </a>
</li>
<li class="nav-item">
<a class="nav-link" id="select-tab" data-toggle="tab" href="#select" role="tab" aria-controls="select" aria-selected="false"> <code>select</code> </a>
</li>
<li class="nav-item">
<a class="nav-link" id="arrange-tab" data-toggle="tab" href="#arrange" role="tab" aria-controls="arrange" aria-selected="false"> <code>arrange</code></a>
</li>
<li class="nav-item">
<a class="nav-link" id="filter3-tab" data-toggle="tab" href="#filter3" role="tab" aria-controls="filter3" aria-selected="false"> <code>filter</code></a>
</li>
<li class="nav-item">
<a class="nav-link" id="mutate3-tab" data-toggle="tab" href="#mutate3" role="tab" aria-controls="mutate3" aria-selected="false"> <code>mutate</code></a>
</li>
<li class="nav-item">
<a class="nav-link" id="summarize-tab" data-toggle="tab" href="#summarize" role="tab" aria-controls="summarize" aria-selected="false"> <code>summarize</code></a>
</li>
<li class="nav-item">
<a class="nav-link" id="group_by-tab" data-toggle="tab" href="#group_by" role="tab" aria-controls="group_by" aria-selected="false"> <code>group_by</code></a>
</li>
</ul>
<div id="myTabContent" class="well tab-content" style="background-color: white;">
<div id="porgs" class="tab-pane fade active in" role="tabpanel" aria-labelledby="porgs-tab">
<img src="../images/porgs/porgs_tbl.png" style="width: 85%;" /> <br><br>
</div>
<div id="select" class="tab-pane fade" role="tabpanel" aria-labelledby="select-tab">
<img src="../images/porgs/select_card.png" style="width: 90%;" /> <br><br> <img src="../images/porgs/select_drop_tbl.png" style="width: 82%;" /> <br><br>
</div>
<div id="arrange" class="tab-pane fade" role="tabpanel" aria-labelledby="arrange-tab">
<img src="../images/porgs/arrange_tbl.png" style="width: 98%; margin-top: 12px;" /> <br><br> <img src="../images/porgs/arrange_tbl_desc.png" style="width: 98%;" /> <br><br>
</div>
<div id="filter3" class="tab-pane fade" role="tabpanel" aria-labelledby="filter3-tab">
<img src="../images/porgs/filter_card.png" style="width: 95%; margin-top: 12px;" /> <br><br> <img src="../images/porgs/filter2_tbl.png" style="width: 95%;" /> <br><br>
</div>
<div id="mutate3" class="tab-pane fade" role="tabpanel" aria-labelledby="mutate3-tab">
<img src="../images/porgs/mutate_card.png" style="width: 98%; margin-top: 12px;" /> <br><br>
</div>
<div id="summarize" class="tab-pane fade" role="tabpanel" aria-labelledby="summarize-tab">
<img src="../images/porgs/summarize_card.png" style="width: 98%;" /> <br><br>
</div>
<div id="group_by" class="tab-pane fade" role="tabpanel" aria-labelledby="group_by-tab">
<img src="../images/porgs/groupby_tbl.png" style="width: 92%; margin-top: 10px;" /> <br><br> <img src="../images/porgs/groupby_tbl2.png" style="width: 94%; margin-top: 12px;" /> <br><br> <img src="../images/porgs/groupby_tbl3.png" style="width: 94%; margin-top: 12px;" /> <br><br> <img src="../images/porgs/groupby_tbl_final.png" style="width: 101%; margin-top: 12px;" />
</div>
</div>
</div>
<div id="select" class="section level1" number="4">
<h1><span class="header-section-number">4</span> <code>select()</code></h1>
<hr>
<p>Use the <code>select()</code> function to:</p>
<ul>
<li>Drop columns you no longer need</li>
<li>Pull-out a few columns to create a new table</li>
<li>Rearrange or change the order of columns</li>
</ul>
<div id="drop-columns-with-a-minus-sign--col_name" class="section level2 unnumbered">
<h2>Drop columns with a minus sign: <code>-col_name</code></h2>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;https://mn-r.netlify.app/data/starwars_scrap_jakku.csv&quot;</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the destination column</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(scrap, <span class="sc">-</span>destination)</span></code></pre></div>
<pre><code>## # A tibble: 1,132 × 6
##    receipt_date item                             origin     amount units price…¹
##    &lt;chr&gt;        &lt;chr&gt;                            &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
##  1 4/1/2013     Flight recorder                  Outskirts     887 Tons     591.
##  2 4/2/2013     Proximity sensor                 Outskirts    7081 Tons    1229.
##  3 4/3/2013     Vitus-Series Attitude Thrusters  Reestki      4901 Tons     226.
##  4 4/4/2013     Aural sensor                     Tuanul        707 Tons     145.
##  5 4/5/2013     Electromagnetic discharge filter Tuanul        107 Tons     188.
##  6 4/6/2013     Proximity sensor                 Tuanul      32109 Tons    1229.
##  7 4/7/2013     Hyperdrive motivator             Tuanul        862 Tons    1485.
##  8 4/8/2013     Landing jet                      Reestki     13944 Tons    1497.
##  9 4/9/2013     Electromagnetic discharge filter Cratertown   7788 Tons     188.
## 10 4/10/2013    Sublight engine                  Outskirts   10642 Tons    7211.
## # … with 1,122 more rows, and abbreviated variable name ¹​price_per_pound
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div id="drop-multiple-columns" class="section level2 unnumbered">
<h2>Drop multiple columns</h2>
<p>Use <code>-c(col_name1, col_name2)</code> or <code>-col_name1, -col_name2</code> to drop multiple columns.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the destination and units columns</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(scrap, <span class="sc">-</span><span class="fu">c</span>(destination, units, amount))</span></code></pre></div>
<pre><code>## # A tibble: 1,132 × 4
##    receipt_date item                             origin     price_per_pound
##    &lt;chr&gt;        &lt;chr&gt;                            &lt;chr&gt;                &lt;dbl&gt;
##  1 4/1/2013     Flight recorder                  Outskirts             591.
##  2 4/2/2013     Proximity sensor                 Outskirts            1229.
##  3 4/3/2013     Vitus-Series Attitude Thrusters  Reestki               226.
##  4 4/4/2013     Aural sensor                     Tuanul                145.
##  5 4/5/2013     Electromagnetic discharge filter Tuanul                188.
##  6 4/6/2013     Proximity sensor                 Tuanul               1229.
##  7 4/7/2013     Hyperdrive motivator             Tuanul               1485.
##  8 4/8/2013     Landing jet                      Reestki              1497.
##  9 4/9/2013     Electromagnetic discharge filter Cratertown            188.
## 10 4/10/2013    Sublight engine                  Outskirts            7211.
## # … with 1,122 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div id="keep-only-3-columns" class="section level2 unnumbered">
<h2>Keep only 3 columns</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep item, amount and price_per_pound columns</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(scrap, item, amount, price_per_pound)</span></code></pre></div>
<pre><code>## # A tibble: 1,132 × 3
##    item                             amount price_per_pound
##    &lt;chr&gt;                             &lt;dbl&gt;           &lt;dbl&gt;
##  1 Flight recorder                     887            591.
##  2 Proximity sensor                   7081           1229.
##  3 Vitus-Series Attitude Thrusters    4901            226.
##  4 Aural sensor                        707            145.
##  5 Electromagnetic discharge filter    107            188.
##  6 Proximity sensor                  32109           1229.
##  7 Hyperdrive motivator                862           1485.
##  8 Landing jet                       13944           1497.
##  9 Electromagnetic discharge filter   7788            188.
## 10 Sublight engine                   10642           7211.
## # … with 1,122 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
<div id="select-everything-else" class="section level2 unnumbered">
<h2>Select <code>everything()</code> else</h2>
<p>Select also works to change the order of columns.</p>
<p>The code below puts the <code>item</code> column first, and then the <code>units</code> and <code>amount</code> columns directly after <code>item</code>. We then add <code>evertyhing()</code> to keep evertyhing else the same.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Make the `item`, `units`, and `amount` columns the first three columns</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Leave `everything()` else in the same order</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(scrap, item, units, amount, <span class="fu">everything</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1,132 × 7
##    item                             units amount receip…¹ origin desti…² price…³
##    &lt;chr&gt;                            &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;
##  1 Flight recorder                  Tons     887 4/1/2013 Outsk… Niima …    591.
##  2 Proximity sensor                 Tons    7081 4/2/2013 Outsk… Raiders   1229.
##  3 Vitus-Series Attitude Thrusters  Tons    4901 4/3/2013 Reest… Raiders    226.
##  4 Aural sensor                     Tons     707 4/4/2013 Tuanul Raiders    145.
##  5 Electromagnetic discharge filter Tons     107 4/5/2013 Tuanul Niima …    188.
##  6 Proximity sensor                 Tons   32109 4/6/2013 Tuanul Trade …   1229.
##  7 Hyperdrive motivator             Tons     862 4/7/2013 Tuanul Trade …   1485.
##  8 Landing jet                      Tons   13944 4/8/2013 Reest… Niima …   1497.
##  9 Electromagnetic discharge filter Tons    7788 4/9/2013 Crate… Raiders    188.
## 10 Sublight engine                  Tons   10642 4/10/20… Outsk… Niima …   7211.
## # … with 1,122 more rows, and abbreviated variable names ¹​receipt_date,
## #   ²​destination, ³​price_per_pound
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
</div>
</div>
<div id="sort-with-arrange" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Sort with <code>arrange()</code></h1>
<hr>
<p>Rey wants to know what the highest priced items are. Use <code>arrange()</code> to find the highest priced scrap item and see which origins might have a lot of them.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange scrap items by price</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">arrange</span>(scrap, price_per_pound)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the top 6 rows</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(scrap)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   receipt_date item         origin        destination   amount units price_per…¹
##   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
## 1 4/4/2013     Aural sensor Tuanul        Raiders          707 Tons         145.
## 2 5/22/2013    Aural sensor Outskirts     Niima Outpost   3005 Tons         145.
## 3 5/23/2013    Aural sensor Tuanul        Raiders         6204 Tons         145.
## 4 6/4/2013     Aural sensor Tuanul        Raiders         3120 Tons         145.
## 5 6/10/2013    Aural sensor Blowback Town Niima Outpost   2312 Tons         145.
## 6 6/20/2013    Aural sensor Outskirts     Trade caravan   6272 Tons         145.
## # … with abbreviated variable name ¹​price_per_pound</code></pre>
<p><br></p>
<blockquote>
<p>What, only <code>145 credits</code>!? That’s not much at all. Oh wait…that’s the smallest one on top.</p>
</blockquote>
<div id="put-the-big-things-first" class="section level2 unnumbered">
<h2>Put the BIG things first</h2>
<p>To arrange a column in descending order with the biggest numbers on top, we use <code>desc(...)</code> around the column name.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Put most expensive items on top</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">arrange</span>(scrap, <span class="fu">desc</span>(price_per_pound))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View the top 8 rows</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(scrap, <span class="dv">8</span>)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 7
##   receipt_date item            origin        destination    amount units price…¹
##   &lt;chr&gt;        &lt;chr&gt;           &lt;chr&gt;         &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1 12/31/2016   Total           All           All           2971601 Tons  579215.
## 2 4/10/2013    Sublight engine Outskirts     Niima Outpost   10642 Tons    7211.
## 3 4/14/2013    Sublight engine Outskirts     Raiders          2377 Tons    7211.
## 4 4/15/2013    Sublight engine Cratertown    Raiders          6310 Tons    7211.
## 5 4/16/2013    Sublight engine Tuanul        Trade caravan    3984 Tons    7211.
## 6 5/14/2013    Sublight engine Cratertown    Raiders           299 Tons    7211.
## 7 6/14/2013    Sublight engine Blowback Town Raiders          8582 Tons    7211.
## 8 8/6/2013     Sublight engine Cratertown    Raiders          1768 Tons    7211.
## # … with abbreviated variable name ¹​price_per_pound</code></pre>
<p><br></p>
<div id="explore-1" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<p>Try arranging by more than one column, such as <code>price_per_pound</code> and <code>amount</code>. What happens?</p>
<p><strong>Hint:</strong> You can view the entire table by clicking on it in the upper-right <em>Environment</em> tab.</p>
</div>
<p><br></p>
<div id="yoda-says" class="section level3 unnumbered yoda">
<h3>Yoda says</h3>
<p><img src="../images/yoda_baby_sq.png" class="yoda-img"></p>
<p>When you save an arranged data table it maintains its order. This is perfect for sending people a quick <strong><code>Top 10</code></strong> list of pollutants or sites.</p>
</div>
<p><br></p>
</div>
</div>
<div id="r-bingo" class="section level1 unnumbered">
<h1>R BINGO!</h1>
<hr class="hr2">
<p><img src="../images/bingo_ggcard.png" style="width: 80%; margin: auto; margin-top: 10px; margin-bottom: 12px;" align="center" /></p>
<p><br></p>
<div id="build-your-bingo-card" class="section level3 unnumbered">
<h3>1. Build your Bingo card</h3>
<p>Use paper and pencil to create a <strong>4x4</strong> grid and fill the boxes with 16 of the items below.</p>
<p><strong>The choice is yours:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>bingo_words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;install.packages()&quot;</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;library()&quot;</span>,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;tidyverse&quot;</span>,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;readr&quot;</span>,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;read_csv()&quot;</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;write_csv()&quot;</span>,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;&lt;-&quot;</span>,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;c()&quot;</span>,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;rm()&quot;</span>,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;nrow()&quot;</span>, </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;ncol()&quot;</span>,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;head()&quot;</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;dplyr&quot;</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;glimpse()&quot;</span>,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;arrange()&quot;</span>, </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;filter()&quot;</span>,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;select()&quot;</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;ggplot2&quot;</span>,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;ggplot()&quot;</span>,</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;geom_col()&quot;</span>,</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;mean()&quot;</span>, </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;min()&quot;</span>,</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;max()&quot;</span>,</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;sum()&quot;</span>,</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;quantile()&quot;</span>,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;=&quot;</span>)</span></code></pre></div>
<p><br></p>
<p><strong>Or use R</strong></p>
<p>To use R to make a random Bingo card for yourself, run the code below.</p>
<details>
<summary class="btn_code_blue">
Show Make Bingo Card &gt;
</summary>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">#library(hrbrthemes)</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>free_space <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>bingo_words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;install.packages()&quot;</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;library()&quot;</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;tidyverse&quot;</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;readr&quot;</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;read_csv()&quot;</span>,</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;write_csv()&quot;</span>,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;&lt;-&quot;</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;c()&quot;</span>,</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;rm()&quot;</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;nrow()&quot;</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;ncol()&quot;</span>,</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;head()&quot;</span>,</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;dplyr&quot;</span>,</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;glimpse()&quot;</span>,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;arrange()&quot;</span>,</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;filter()&quot;</span>,</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;select()&quot;</span>,</span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;ggplot2&quot;</span>,</span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;ggplot()&quot;</span>,</span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;geom_col()&quot;</span>,</span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;mean()&quot;</span>,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;min()&quot;</span>,</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;max()&quot;</span>,</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;sum()&quot;</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;quantile()&quot;</span>,</span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&quot;=&quot;</span>)</span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>bingo_card <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">item =</span> <span class="fu">sample</span>(bingo_words, <span class="dv">16</span>))</span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>bingo_card <span class="ot">&lt;-</span> <span class="fu">mutate</span>(bingo_card,</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>                     <span class="at">row =</span> <span class="dv">0</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%/%</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col =</span> <span class="dv">0</span><span class="sc">:</span>(<span class="fu">n</span>()<span class="sc">-</span><span class="dv">1</span>) <span class="sc">%%</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">1</span>,</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>                     <span class="at">item =</span> <span class="fu">ifelse</span>(free_space <span class="sc">&amp;</span> row <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> col <span class="sc">==</span> <span class="dv">2</span>, <span class="st">&quot;Free</span><span class="sc">\n</span><span class="st">Space&quot;</span>, item),</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>                     <span class="at">p =</span> <span class="fu">runif</span>(<span class="dv">16</span>))</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(bingo_card, <span class="fu">aes</span>(<span class="at">x =</span> col, <span class="at">y =</span> row, <span class="at">label =</span> item, <span class="at">color =</span> item, <span class="at">fill =</span> p)) <span class="sc">+</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">width=</span><span class="fl">0.95</span>, <span class="at">height=</span><span class="fl">0.95</span>), <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">color =</span> <span class="st">&quot;gray&quot;</span>) <span class="sc">+</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">#theme_ft_rc(plot_title_size = 24) +</span></span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span> </span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;R BINGO&quot;</span>,</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
</details>
</div>
<div id="well-call-out-the-bingo-items-using-an-r-function-we-just-wrote.-its-named-play_bingo" class="section level3 unnumbered">
<h3>2. We’ll call out the bingo items using an R function we just wrote. It’s named <code>play_bingo()</code></h3>
<details>
<summary class="btn_code">
Show Bingo function &gt;
</summary>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get pretty colors</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;viridis&quot;</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Shuffle the Bingo words </span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>bingo_words <span class="ot">&lt;-</span> <span class="fu">sample</span>(bingo_words)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the draw number in case we need to backtrack</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop thru each word</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>play_bingo <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">words =</span> bingo_words, <span class="at">n =</span> <span class="dv">1</span>) {</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(words)) {</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;</span><span class="sc">\n\t\t</span><span class="st">&quot;</span>, words[n], <span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span>))</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Plot the word</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  call_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">1</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="fu">sample</span>(<span class="fu">viridis_pal</span>()(<span class="dv">30</span>), <span class="dv">1</span>), <span class="at">size =</span> <span class="dv">177</span>) <span class="sc">+</span> </span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_label</span>(<span class="at">label =</span> words[n], <span class="at">size =</span> <span class="dv">12</span>) <span class="sc">+</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_void</span>()</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(call_plot)</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(n <span class="sc">&lt;</span> <span class="fu">length</span>(words)) { </span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">readline</span>(<span class="at">prompt=</span><span class="st">&quot;&gt; Press [Enter]&quot;</span>) </span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">&quot;Goodbye!&quot;</span>)</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="fu">play_bingo</span>()</span></code></pre></div>
</details>
<p><br></p>
</div>
</div>
<div id="filter" class="section level1" number="6">
<h1><span class="header-section-number">6</span> <code>filter()</code></h1>
<hr>
<p>The <code>filter()</code> function creates a subset of the data based on the value of one or more columns.</p>
<p>Let’s use it to look at the rows in the data that have an item listed as <code>"Total"</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(scrap, item <span class="sc">==</span> <span class="st">&quot;Total&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 7
##   receipt_date item  origin destination  amount units price_per_pound
##   &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
## 1 12/31/2016   Total All    All         2971601 Tons          579215.</code></pre>
<p><br></p>
<div id="note" class="section level3 unnumbered note">
<h3>Note</h3>
<div id="vs." class="section level4 unnumbered">
<h4><code>==</code> vs. <code>=</code></h4>
<p>We use a <code>==</code> (double equals sign) for comparing values. A <code>==</code> makes the comparison “is it equal to?” and returns a True or False answer. So the code above returns only the rows where the condition <code>origin == "All"</code> is TRUE.</p>
<p>A single equals sign <code>=</code> is used within functions to set options, for example <code>read_csv(file = "scrap.csv")</code>.</p>
<p>It’s not a big deal if you mix them up the first time. R is often helpful and will let you know which one is needed.</p>
</div>
</div>
<div id="comparing-values" class="section level2 unnumbered">
<h2>Comparing values</h2>
<hr class="hrlvl2">
<p><img src="../images/porg_heights.png" style="float: right; margin-top: -94px; width: 40%;" /></p>
<p>We use a variety of comparisons when processing data. Sometimes we only want concentrations above a certain level, or days below a given temperature, or sites that have missing observations.</p>
<p>We use the <strong>Menu</strong> of comparisons below to find the data we want.</p>
<div class="pinkcode">
<h3 style="margin-top: 18px; margin-bottom: -4px;">
Menu of comparisons
</h3>
<table>
<thead>
<tr class="header">
<th align="left">Symbol</th>
<th align="left">Comparison</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&gt;</code></td>
<td align="left">greater than</td>
</tr>
<tr class="even">
<td align="left"><code>&gt;=</code></td>
<td align="left">greater than or equal to</td>
</tr>
<tr class="odd">
<td align="left"><code>&lt;</code></td>
<td align="left">less than</td>
</tr>
<tr class="even">
<td align="left"><code>&lt;=</code></td>
<td align="left">less than or equal to</td>
</tr>
<tr class="odd">
<td align="left"><code>==</code></td>
<td align="left">equal to</td>
</tr>
<tr class="even">
<td align="left"><code>!=</code></td>
<td align="left">NOT equal to</td>
</tr>
<tr class="odd">
<td align="left"><code>%in%</code></td>
<td align="left">value is in a list: <code>X %in% c(1,3,7)</code></td>
</tr>
<tr class="even">
<td align="left"><code>is.na(...)</code></td>
<td align="left">is the value missing?</td>
</tr>
<tr class="odd">
<td align="left"><code>str_detect(col_name, "word")</code></td>
<td align="left">“word” appears in text?</td>
</tr>
</tbody>
</table>
</div>
<p><br></p>
<div id="explore-2" class="section level3 unnumbered tip">
<h3><i class="fas fa-user-astronaut" style="color: green"></i> Explore!</h3>
<p>Try comparing some things in the console to see if you get what you’d expect. R doesn’t always think like we do.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">!=</span> <span class="dv">5</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">==</span> <span class="dv">4</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">&lt;</span> <span class="dv">3</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="sc">&gt;</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">==</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="cn">NA</span></span></code></pre></div>
</div>
</div>
<div id="dropping-rows" class="section level2 unnumbered">
<h2>Dropping rows</h2>
<hr class="hrlvl2">
<p>Let’s look at the data without the <em>Total</em> category. Look in the comparison table above to find the <code>NOT</code> operator. We’re going to filter the data to keep only the items that are <code>NOT equal</code> to “Total”.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">filter</span>(scrap, item <span class="sc">!=</span> <span class="st">&quot;Total&quot;</span>)</span></code></pre></div>
<p>We can arrange the data in ascending order by <code>item</code> to confirm the “All” category is gone.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange data</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">arrange</span>(scrap, item)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(scrap)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   receipt_date item         origin        destination   amount units price_per…¹
##   &lt;chr&gt;        &lt;chr&gt;        &lt;chr&gt;         &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;
## 1 4/4/2013     Aural sensor Tuanul        Raiders          707 Tons         145.
## 2 5/22/2013    Aural sensor Outskirts     Niima Outpost   3005 Tons         145.
## 3 5/23/2013    Aural sensor Tuanul        Raiders         6204 Tons         145.
## 4 6/4/2013     Aural sensor Tuanul        Raiders         3120 Tons         145.
## 5 6/10/2013    Aural sensor Blowback Town Niima Outpost   2312 Tons         145.
## 6 6/20/2013    Aural sensor Outskirts     Trade caravan   6272 Tons         145.
## # … with abbreviated variable name ¹​price_per_pound</code></pre>
<p><br></p>
<div class="well">
<p>Now let’s take another look at that bar chart.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> amount)) <span class="sc">+</span> <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="/page/Day1_PM_files/figure-html/ggplot-noAll-1.png" width="672" /></p>
<div id="great-work" class="section level3 unnumbered">
<h3>Great work!</h3>
</div>
</div>
</div>
<div id="multiple-filters" class="section level2 unnumbered">
<h2>Multiple filters</h2>
<hr class="hrlvl2">
<p>We can add multiple comparisons to <code>filter()</code> to further restrict the data we pull from a larger data set. Only the records that pass the conditions of all the comparisons will be pulled into the new data frame.</p>
<p>The code below filters the data to only scrap records with an origin of <code>Outskirts</code> <strong>AND</strong> a destination of <code>Niima Outpost</code>.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>outskirts_to_niima <span class="ot">&lt;-</span> <span class="fu">filter</span>(scrap, </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                             origin        <span class="sc">==</span> <span class="st">&quot;Outskirts&quot;</span>, </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                             destination   <span class="sc">==</span> <span class="st">&quot;Niima Outpost&quot;</span>)</span></code></pre></div>
<p><br></p>
<div class="well">
<p>Now, let’s calculate some new columns to help focus Rey’s scrap finding.</p>
</div>
</div>
</div>
<div id="mutate" class="section level1" number="7">
<h1><span class="header-section-number">7</span> <code>mutate()</code></h1>
<hr>
<p><code>mutate()</code> can edit existing columns in a data frame or add new values that are calculated from existing columns.</p>
<div id="add-a-column" class="section level2 unnumbered">
<h2>Add a column</h2>
<p>First, let’s add a column with our names. That way Rey can thank us personally when her ship is finally up and running.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add your name as a column</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">mutate</span>(scrap, <span class="at">scrap_finder =</span> <span class="st">&quot;BB8&quot;</span>)</span></code></pre></div>
</div>
<div id="add-several-columns" class="section level2 unnumbered">
<h2>Add several columns</h2>
<p>Let’s also add a new column to document the data measurement method.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#  Add your name as a column and</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  some information about the method</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">mutate</span>(scrap, </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">scrap_finder    =</span> <span class="st">&quot;BB8&quot;</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">measure_method  =</span> <span class="st">&quot;REM-24&quot;</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="do">## REM = Republic Equivalent Method</span></span></code></pre></div>
</div>
<div id="change-a-column" class="section level2 unnumbered">
<h2>Change a column</h2>
<hr class="hrlvl2">
<p>Remember how the units of Tons was written two ways: “TONS” and “Tons”? We can use <code>mutate()</code> together with <code>tolower()</code> to make sure all of the scrap units are written in lower case. This will help prevent them from getting grouped separately in our plots and summaries.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set units to all lower-case</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>scrap <span class="ot">&lt;-</span> <span class="fu">mutate</span>(scrap, <span class="at">units =</span> <span class="fu">tolower</span>(units))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co"># toupper() changes all of the letters to upper-case.</span></span></code></pre></div>
</div>
<div id="add-calculated-columns" class="section level2 unnumbered">
<h2>Add calculated columns</h2>
<p>In our work we often use <code>mutate</code> to convert units for measurements. In this case, let’s estimate the total pounds for the scrap items that are reported in tons.</p>
<div id="tons-to-pounds-conversion" class="section level3 unnumbered">
<h3>Tons <code>to</code> Pounds conversion</h3>
<p>We can use <code>mutate()</code> to convert the <code>amount</code> column to pounds. Multiply the <code>amount</code> column by 2000 to get new values for a column named <code>amount_lbs</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>scrap_pounds <span class="ot">&lt;-</span> <span class="fu">mutate</span>(scrap, <span class="at">amount_lbs =</span> amount <span class="sc">*</span> <span class="dv">2000</span>)</span></code></pre></div>
</div>
</div>
<div id="final-stretch" class="section level2 unnumbered">
<h2>Final stretch!</h2>
<hr class="hrlvl2">
<blockquote>
<p>We now have all the tools we need.</p>
<p>To get Rey’s ship working we need to track down more of the scrap item: <strong><code>Ion engine</code></strong>.</p>
</blockquote>
<p><strong>Step 1:</strong></p>
<ul>
<li><strong>filter</strong> the data to only the rows where the item’s name is <code>"Ion engine"</code></li>
</ul>
<p><br></p>
<details>
<summary class="btn_code_blue">
<em>Show code</em>
</summary>
<p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Grab only the items named &quot;Ion engine&quot;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>scrap_pounds <span class="ot">&lt;-</span> <span class="fu">filter</span>(scrap_pounds, item <span class="sc">==</span> <span class="st">&quot;Ion engine&quot;</span>)</span></code></pre></div>
</p>
</details>
<br><br>
<hr class="hr2">
<p>Next <em>arrange</em> the data in descending order of pounds so Rey knows where the highest amount of <code>Ion engine</code> scrap comes from.</p>
<p><strong>Step 2:</strong></p>
<ul>
<li><strong>arrange</strong> the table in descending order by <code>amount_lbs</code></li>
</ul>
<p><br></p>
<details>
<summary class="btn_code_blue">
<em>Show code</em>
</summary>
<p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arrange data</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>scrap_pounds <span class="ot">&lt;-</span> <span class="fu">arrange</span>(scrap_pounds, <span class="fu">desc</span>(amount_lbs))</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Return the origin of the highest amount_lbs of scrap</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(scrap_pounds, <span class="dv">1</span>)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the total amount_lbs by origin</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap_pounds, <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> amount_lbs)) <span class="sc">+</span> </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
</p>
</details>
<div id="complete-the-mission" class="section level3 unnumbered quiz">
<h3>Complete the mission!</h3>
<p><strong>For <code>Ion engine</code>’s, which origin has the most <code>amount_lbs</code>?</strong></p>
<p><input type="radio" name="ion"> <em>Tuanul</em> <br>
<input type="radio" name="ion"> <em>Cratertown</em> <br>
<input type="radio" name="ion"> <em>Outskirts</em> <br>
<input type="radio" name="ion"> <em>Reestki</em> <br></p>
<p><br></p>
<details>
<summary class="btn_code">
<em>Show solution</em>
</summary>
<p>
<p><i class="fa fa-check" aria-hidden="true" style="color: green;"></i> <code>Cratertown</code></p>
<em>Yes!! You receive the ship parts to repair Rey’s Millennium Falcon. Onward!</em>
</p>
</details>
</div>
<div style="clear: both;">

</div>
</div>
<div id="first-mission-complete" class="section level2 unnumbered">
<h2>First mission complete!</h2>
<p><strong>Nice work!</strong> Rey got a great deal on her engines and even traded in some scrap for spending cash. <em>Woop! You’ve got the music in you, oh, oh, oh… Sorry.</em></p>
<p><br></p>
<blockquote>
<p><strong>Time to get off this dusty planet, we’re flying to Endor!</strong></p>
</blockquote>
<p><img src="../images/blast_off_ship_jakku.gif" style="margin-left: 12%; width: 75%;" /></p>
<p><br></p>
</div>
</div>
<div id="saving-data" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Saving data</h1>
<hr>
<p>We are ready to save our data. You can save data to a file with a handy function from the <strong><code>readr</code></strong> package. Let’s use the function <code>write_csv()</code> to save our new table with the tons converted to pounds to a CSV file named <em>“scrap_in_pounds”</em>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save data as a CSV file </span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(scrap_pounds, <span class="st">&quot;scrap_in_pounds.csv&quot;</span>)</span></code></pre></div>
<blockquote>
<p>Where did R save the file?</p>
<p><em>Hint:</em> You can look in the lower right <code>[Files]</code> tab.</p>
</blockquote>
<p><br></p>
<p>Let’s create a new <code>results/</code> folder to keep our processed data separate from any raw data we receive. Now we can add <code>results/</code> to our file path in <code>write_csv()</code> to tell R to put the file in that folder.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Save data as a CSV file to results folder</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(scrap_pounds, <span class="st">&quot;results/scrap_in_pounds.csv&quot;</span>)</span></code></pre></div>
<div id="where-am-i" class="section level2 unnumbered">
<h2>Where am I?</h2>
<hr class="hrlvl2">
<p>You are in your <strong>working directory</strong> (folder).</p>
<p>When you open a new R project in RStudio your starting working directory is your project folder. Your project folder is like your <strong>home</strong> folder, and is the default location R will look for data files unless told otherwise.</p>
<p>To load a file called <code>new_data.csv</code> stored directly in your project folder, you only need to enter its name as the file path:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;new_data.csv&quot;</span>)</span></code></pre></div>
<p><strong>What if the data is in a different folder?</strong></p>
<p>Have you ever tried to call a different country? When you dial a number, your phone will generally assume the default Country Code is the country that you’re standing in when you dial a number. But when you want to call another country, like Canada, you have to add the Country Code to the front of the number you’re dialing.</p>
<p>Similarly, to access files outside of your home directory you will need to tell R to go look in another folder.</p>
<div id="example-1" class="section level3 unnumbered">
<h3>Example 1</h3>
<p>Say you have a folder <code>Endor</code> sitting in your project folder, and inside it there’s a file called <code>Ewok_data.csv</code>. To read the file into R you would write:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Endor/Ewok_data.csv&quot;</span>)</span></code></pre></div>
<p><br></p>
<blockquote>
<p><strong>NOTE:</strong> The slash used for file paths in R is a forward leaning slash (<code>/</code>), and is the opposite of the slash commonly seen in folder locations on <em>Windows</em> computers. If you get an <strong>ERROR</strong> when trying to load a file, remember to check your slashes.</p>
</blockquote>
<p><br></p>
</div>
<div id="example-2" class="section level3 unnumbered">
<h3>Example 2</h3>
<p>If a file is completely outside of your project, you’ll want to include the file’s entire file path on your computer. This is also known as an <em>absolute path</em>. An absolute path usually begins with the letter of the computer drive, such as <code>C:/</code> or <code>X:/</code>. Loading a file called <code>secret_data.csv</code> directly from your Desktop would look something like this:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;C:/Users/me/Desktop/secret_data.csv&quot;</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="yoda-says-1" class="section level3 unnumbered yoda">
<h3>Yoda says</h3>
<p><img src="../images/yoda_baby_sq.png" class="yoda-img"></p>
<p>Much better, simple file paths are.</p>
<p>File paths with your user name in them don’t share well with others and may break if the data is moved. It’s best to store data in your project folder as much as possible to avoid using absolute paths.</p>
</div>
</div>
</div>
<div id="plots-with-ggplot2" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Plots with <em>ggplot2</em></h1>
<hr>
<p><br></p>
<div id="plot-the-data-plot-the-data-plot-the-data" class="section level4 unnumbered">
<h4><em>Plot the data, Plot the data, Plot the data</em></h4>
<p><br></p>
<p><img src="../images/ggplot2_hex.png" style="margin-right: 70px; margin-top: -124px;" align="right" width="180" /></p>
<p>This is going to be a long flight. Let’s warm up our plotting machines so they are ready for Endor. To get started, let’s answer Rey’s question about where the most scrap was sent to on Jakku.</p>
</div>
<div id="the-ggplot-sandwich" class="section level2 unnumbered">
<h2>The <code>ggplot()</code> sandwich</h2>
<p><img src="../images/auto_plot.gif" style="margin-top: -22px; margin-left: -40px; max-width: 110%;" /></p>
<h5 style="font-size: 28px; font-weight: bold; margin-top: -42px;">
A <code>ggplot</code> has 3 ingredients.
</h5>
</div>
<div id="the-base-plot" class="section level2 unnumbered">
<h2>1. The base plot</h2>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap)</span></code></pre></div>
<p><img src="/page/Day1_PM_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><br></p>
<blockquote>
<p>We load version 2 of the package <code>library(ggplot2)</code>, but the function to make the plot is plain <code>ggplot()</code>. <em>Sorry, ggplot is fun that like that.</em></p>
</blockquote>
</div>
<div id="the-the-x-y-aesthetics" class="section level2 unnumbered">
<h2>2. The the X, Y <em>aesthetics</em></h2>
<p>The <em>aesthetics</em> assign the columns from the data that you want to use in the chart. This is where you set the <code>X</code>-<code>Y</code> variables that determine the dimensions of the plot.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> amount)) </span></code></pre></div>
<p><img src="/page/Day1_PM_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="the-layers-aka-geometries" class="section level2 unnumbered">
<h2>3. The layers AKA geometries</h2>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> amount)) <span class="sc">+</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="/page/Day1_PM_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="colors" class="section level2 unnumbered">
<h2>Colors</h2>
<hr class="hrlvl2">
<p>Now let’s change the fill color to match the destination.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> destination, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> amount, </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() </span></code></pre></div>
<p><img src="/page/Day1_PM_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p><br></p>
</div>
<div id="sorting-and-labels" class="section level2 unnumbered">
<h2>Sorting and labels</h2>
<hr class="hrlvl2">
<p>Finally, let’s order the amounts from highest to lowest <em>(decreasing)</em>.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(destination, amount, <span class="at">decreasing =</span> <span class="cn">TRUE</span>), </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">y =</span> amount, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">fill =</span> destination)) <span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;The Trade Caravan receives the most scrap&quot;</span>,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Total scrap shipments on planet Jakku&quot;</span>,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;destination&quot;</span>,</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">&quot;Source: Data intercepted by BB8 in year 2023&quot;</span>)</span></code></pre></div>
<p><img src="/page/Day1_PM_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p><br></p>
<div id="explore-3" class="section level3 unnumbered tip">
<h3><i class="fa fa-user-astronaut" style="color: green;"></i> Explore!</h3>
<p>Fill in the code below to make a column plot showing the total amount of scrap for each <code>item</code>.</p>
<p><br></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(scrap, <span class="fu">aes</span>(<span class="at">x =</span> ___________, <span class="at">y =</span> amount)) <span class="sc">+</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p>Now, try setting the <strong>fill</strong> argument equal to the <code>destination</code> column.</p>
</div>
<p><br></p>
</div>
</div>
<div id="shutdown-complete" class="section level1" number="10">
<h1><span class="header-section-number">10</span> Shutdown complete</h1>
<hr>
<p>When you close R for the first time you’ll see some options about saving your workspace, history, and other files. In general, we advise against saving these files. This will help RStudio open a fresh and clean environment every time you start it. It’s easy enough to re-run your script next time you open your project.</p>
<p>Follow these steps to set these options permanently, and not see the pop-up windows when you close R.</p>
<p><strong>Turn off <em>Save Workspace</em> </strong></p>
<ol style="list-style-type: decimal">
<li>Go to <code>Tools &gt; Global Options....</code> on the top RStudio navigation bar</li>
<li>On the first screen:
<ul>
<li>Under <strong>Workspace</strong>
<ul>
<li><input type="checkbox" disabled="" />  Uncheck <em>Restore .Rdata into workspace at startup</em></li>
<li>Set <em>Save workspace to .RData on exit</em> to <strong>[Never]</strong></li>
</ul></li>
<li>Under <strong>History</strong>
<ul class="task-list">
<li><input type="checkbox" disabled="" />  Uncheck <em>Always save history</em></li>
</ul></li>
</ul></li>
<li>Click <code>OK</code> at the bottom</li>
</ol>
<p><br></p>
<p><img src="../images/scaryR.jpg" style="margin-left: 11%; width: 78%;" /></p>
</div>
<div id="learn-more" class="section level1" number="11">
<h1><span class="header-section-number">11</span> Learn more!</h1>
<hr>
<ul>
<li>RStudio Primers: <a href="https://posit.cloud/learn/primers/1.1">Data Visualization Basics</a></li>
<li><a href="https://rstudio-education.github.io/hopr/basics.html">R Basics</a></li>
</ul>
<p><br></p>
<div id="return-to-homebase" class="section level3 unnumbered">
<h3><i class="fa fa-rocket" aria-hidden="true"></i> Return to <a href="../post/day-1.html">Homebase</a></h3>
<p><br></p>
</div>
</div>
